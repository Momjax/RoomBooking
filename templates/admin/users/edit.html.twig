{% extends 'base.html.twig' %}
{% block title %}Modifier l'utilisateur - Admin{% endblock %}
{% block stylesheets %}
<style>
    .form-card { background: #1e293b; border: 1px solid #334155; border-radius: 16px; padding: 2rem; max-width: 600px; margin: 0 auto; }
    .form-group { margin-bottom: 1.2rem; }
    .form-group label { display: block; font-weight: 600; margin-bottom: 0.4rem; color: #cbd5e1; }
    .form-group input, .form-group select { width: 100%; padding: 0.7rem; background: #0f172a; border: 1px solid #334155; border-radius: 10px; color: #e2e8f0; outline: none; }
    .btn-submit { background: linear-gradient(135deg, #38bdf8, #818cf8); color: #0f172a; border: none; padding: 0.8rem 2rem; border-radius: 12px; font-weight: 700; cursor: pointer; width: 100%; margin-top: 1rem; }
</style>
{% endblock %}
{% block body %}
<div class="form-card">
    <h1>üë§ Modifier l'utilisateur : {{ user.fullName }}</h1>
    <form method="post">
        <div class="form-group" style="display: flex; gap: 1rem;">
            <div style="flex: 1;">
                <label for="firstname">Pr√©nom</label>
                <input type="text" id="firstname" name="firstname" value="{{ user.firstname }}" required>
            </div>
            <div style="flex: 1;">
                <label for="lastname">Nom</label>
                <input type="text" id="lastname" name="lastname" value="{{ user.lastname }}" required>
            </div>
        </div>
        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" value="{{ user.email }}" required>
        </div>
        <div class="form-group">
            <label for="role">R√¥le</label>
            <select id="role" name="role" required>
                <option value="ROLE_USER" {{ 'ROLE_ADMIN' not in user.roles and 'ROLE_PROFESSEUR' not in user.roles ? 'selected' : '' }}>√âtudiant</option>
                <option value="ROLE_PROFESSEUR" {{ 'ROLE_PROFESSEUR' in user.roles ? 'selected' : '' }}>Professeur / Coordinateur</option>
                <option value="ROLE_ADMIN" {{ 'ROLE_ADMIN' in user.roles ? 'selected' : '' }}>Administrateur</option>
            </select>
        </div>
        <div class="form-group" id="classe-group">
            <label for="classe_id">Classe de l'√©l√®ve (R√¥le √âtudiant)</label>
            <select id="classe_id" name="classe_id">
                <option value="">-- Aucune classe --</option>
                {% for classe in classes %}
                    <option value="{{ classe.id }}" {{ user.classe and user.classe.id == classe.id ? 'selected' : '' }}>{{ classe.classeName }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group" id="prof-classes-group">
            <label for="classes_gerees">Classes g√©r√©es (R√¥le Professeur)</label>
            <select id="classes_gerees" name="classes_gerees[]" multiple style="height: 100px;">
                {% for classe in classes %}
                    <option value="{{ classe.id }}" {{ classe in user.classesGerees ? 'selected' : '' }}>{{ classe.classeName }}</option>
                {% endfor %}
            </select>
            <p style="font-size: 0.75rem; color: #64748b; margin-top: 5px;">(Maintenir Ctrl pour s√©lectionner plusieurs classes)</p>
        </div>

        <button type="submit" class="btn-submit">Mettre √† jour</button>
        <a href="{{ path('app_admin_users') }}" style="display: block; text-align: center; margin-top: 1.5rem; color: #94a3b8; text-decoration: none;">Annuler</a>
    </form>
</div>
{% endblock %}
